$.fn.percircle=function(t){var a=[],e=$.extend({},{animate:!0},t);return $(window).scroll(function(t){$.each(a,function(t,a){a.completed||inViewport(a.instance)&&(a.completed=!0,$(a.instance).percircle(a.options))})}),this.each(function(){$(this).hasClass("gt50")&&$(this).removeClass("gt50");var t=$(this),r=!1;t.data("initialised")?r=!0:t.data("initialised",!0);var s,o,n;t.hasClass("percircle")||t.addClass("percircle"),void 0!==t.attr("data-animate")&&(e.animate="true"==t.attr("data-animate")),e.animate&&t.addClass("animate"),void 0!==t.attr("data-animateOnView")&&(e.animateOnView="true"==t.attr("data-animateOnView")),void 0!==t.attr("data-progressBarColor")&&(e.progressBarColor=t.attr("data-progressBarColor")),s={"border-color":e.progressBarColor},o=$(this),n=e.progressBarColor,t.on("mouseover",function(){o.children("span").css("color",n)}),t.on("mouseleave",function(){o.children("span").attr("style","")});var i=t.attr("data-percent")||e.percent||0,d=t.attr("data-perclock")||e.perclock||0,c=t.attr("data-perdown")||e.perdown||0;if(e.animate&&e.animateOnView&&!inViewport(this)&&!r&&(a.push({instance:this,options:e}),i=0),i||e.displayTextAtZero){i>50&&t.addClass("gt50");var l=t.attr("data-total"),m=t.attr("data-text")||e.text||i+"%";t.html("<span>"+m+'<i class="total">'+l+"</i></span>"),$('<div class="slice"><div class="bar"></div><div class="fill"></div></div>').appendTo(t),$(".slice .bar, .slice .fill",t).css(s),i>50&&$(".bar",t).css({"-webkit-transform":"rotate(180deg)","-moz-transform":"rotate(180deg)","-ms-transform":"rotate(180deg)","-o-transform":"rotate(180deg)",transform:"rotate(180deg)"});var f=3.6*i;setTimeout(function(){$(".bar",t).css({"-webkit-transform":"rotate("+f+"deg)","-moz-transform":"rotate("+f+"deg)","-ms-transform":"rotate("+f+"deg)","-o-transform":"rotate("+f+"deg)",transform:"rotate("+f+"deg)"})},0)}else d&&!r?(t.hasClass("perclock")||t.addClass("perclock"),setInterval(function(){var a=new Date,e=getPadded(a.getHours())+":"+getPadded(a.getMinutes())+":"+getPadded(a.getSeconds());t.html("<span>"+e+"</span>"),$('<div class="slice"><div class="bar"></div><div class="fill"></div></div>').css(s).appendTo(t);var r=a.getSeconds();0===r&&t.removeClass("gt50"),r>30&&(t.addClass("gt50"),$(".bar",t).css({"-webkit-transform":"rotate(180deg);scale(1,3)","-moz-transform":"rotate(180deg);scale(1,3)","-ms-transform":"rotate(180deg);scale(1,3)","-o-transform":"rotate(180deg);scale(1,3)",transform:"rotate(180deg);scale(1,3)"}));var o=6*r;$(".bar",t).css({"-webkit-transform":"rotate("+o+"deg)","-moz-transform":"rotate("+o+"deg)","-ms-transform":"rotate("+o+"deg)","-o-transform":"rotate("+o+"deg)",transform:"rotate("+o+"deg)"})},1e3)):c&&!r&&getCountdown(t,e,s)})};var inViewport=function(t){return $(t).offset().top+$(t).height()<$(window).scrollTop()+$(window).height()},getCountdown=function(t,a,e){var r,s=t.attr("data-secs")||a.secs,o=t.attr("data-timeUpText")||a.timeUpText,n=t[0].hasAttribute("data-reset")||a.reset;function i(){if((s-=1)>30&&t.addClass("gt50"),s<30&&t.removeClass("gt50"),l(),s<=0)return c(),void t.html("<span>"+o+"</span>")}function d(){r=setInterval(i,1e3)}function c(){clearInterval(r)}function l(){t.html("<span>"+s+"</span>"),$('<div class="slice"><div class="bar"></div><div class="fill"></div></div>').css(e).appendTo(t);var a=6*s;$(".bar",t).css({"-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)","-o-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)"})}o.length>8&&(o="the end"),n&&t.on("click",function(){c(),s=a.secs,l(),d()}),d()},getPadded=function(t){return t<10?"0"+t:t};