function cursor(n) {
    var e = $(n);
    $("html,body,a,a:link,a:hover,a:focus,a:active,button,label").css("cursor", "none"),
        $(document).on("mousemove", function (n) {
            e.css({ top: n.pageY - 5, left: n.pageX - 5 });
        }),
        $(document).on("mousedown", function () {
            e.addClass("-down");
        }),
        $(document).on("mouseup", function () {
            e.removeClass("-down");
        });
}
function clear() {
    bgm02.pause(), (bgm02.currentTime = 0);
    var n = $("body").find(".stage__content.-active .success");
    $("body").addClass("-activeLayerPopup"),
        n.addClass("-active").find(".nextMission__imgBox").append('<canvas id="canvasRound"></canvas>'),
        n.find(".success__img").addClass("-active"),
        soundFx(fireWork),
        soundFx(sound_yea),
        soundBg(bgm_end),
        setTimeout(function () {
            soundFx(missionOn);
        }, 2e3),
        (function () {
            var n = document.getElementById("canvasRound"),
                e = n.width,
                t = n.height,
                o = n.getContext("2d");
            (o.lineWidth = 10), (o.strokeStyle = "#feda3c"), (o.shadowOffsetX = 0), (o.shadowOffsetY = 0), (o.shadowBlur = 0), (o.shadowColor = "#feda3c");
            var i,
                s = e / 2,
                a = t / 2,
                c = 68,
                d = 2 * Math.PI,
                u = 0,
                r = 68,
                m = 0,
                l = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
            (window.requestAnimationFrame = l),
                $(".nextMission__head")
                    .on("mouseover", function () {
                        !(function n(l) {
                            o.clearRect(0, 0, e, t),
                                o.beginPath(),
                                o.arc(s, a, c, u, l, !1),
                                o.stroke(),
                                (m += 3),
                                (i = requestAnimationFrame(function () {
                                    n((d * m) / 100 + u);
                                })),
                                m >= r + 1 && cancelAnimationFrame(i);
                        })(),
                            $(".nextMission__arrow,.nextMission__mask,.nextMission__head").addClass("-hover");
                    })
                    .on("mouseleave", function () {
                        setTimeout(function () {
                            o.clearRect(0, 0, e, t), (m = 0), $(".nextMission__arrow,.nextMission__mask,.nextMission__head").removeClass("-hover");
                        }, 100);
                    });
        })();
}
function nextMission(n) {
    var e = $("body", window.parent.document);
    e.find(".loading__tit span").text("MOVING TO STAGE..."),
        e.find(".loading").removeClass("-slideUp"),
        setTimeout(function () {
            $("body", window.parent.document).find("#iframe").attr("src", n);
        }, 1e3);
}
function loadingComplete() {
    $(window).load(function () {
        var n = $("body", window.parent.document);
        n.find(".loading__tit span").text("COMPLETE"),
            setTimeout(function () {
                n.find(".loading").addClass("-slideUp"), soundBg(bgm02);
            }, 500);
    });
}
function starting(n, e) {
    setTimeout(function () {
        $(".loading").addClass("-slideUp");
    }, 1500),
        setTimeout(function () {
            $(".intro__txtBox").t(n, { caret: !1, speed: e }), $(".intro__tec").addClass("-active");
        }, 2e3),
        setTimeout(function () {
            $(".intro").addClass("-active");
        }, 6500),
        $(".intro").addClass("-startUp");
}
function soundBg(n) {
    $("#chkBgm", parent.document).is(":checked") ? n.play() : (n.pause(), (n.currentTime = 0));
}
function soundFx(n, e, t) {
    var o = $("#chkFx", parent.document);
    "loop" == e && (n.loop = !0), "stop" == e ? (n.pause(), (n.currentTime = 0)) : o.is(":checked") ? ((n.currentTime = 0), n.play()) : (n.pause(), (n.currentTime = 0));
}
$(document).ready(function () {
    $(".tipBox__close").on("click", function () {
        $(".tipBox,.tipBox__tec").removeClass("-active");
    }),
        $(".incorrect").on("click", function () {
            $(this).closest(".incorrect").removeClass("-active");
        }),
        $(".stage__home,.btnMain,.nextMission,.btn.-next,.btn.-prev").on("click", function () {
            return nextMission($(this).attr("href")), !1;
        }),
        $(".tipBtn")
            .on("click", function () {
                $("body").find(".stage__content.-active .tipBox").addClass("-active"),
                    setTimeout(function () {
                        $(".tipBox__tec").addClass("-active"), soundFx(sound_sharara);
                    }, 500);
            })
            .on("mouseover", function () {}),
        $(".stage__exit").on("click", function () {});
});
