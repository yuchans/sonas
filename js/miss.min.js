function clear() {
    bgm02.pause(),
        (bgm02.currentTime = 0),
        $("body").addClass("-activeLayerPopup"),
        $("body").find(".stage__content.-active .success").addClass("-active").find(".nextMission__imgBox").append('<canvas id="canvasRound"></canvas>'),
        soundFx(fireWork),
        soundFx(sound_yea),
        soundBg(bgm_end),
        setTimeout(function () {
            $.confetti.start(), $.confetti.restart();
        }, 400),
        setTimeout(function () {
            $.confetti.stop(), soundFx(missionOn);
        }, 2e3),
        (function () {
            var t = document.getElementById("canvasRound"),
                n = t.width,
                i = t.height,
                e = t.getContext("2d");
            (e.lineWidth = 10), (e.strokeStyle = "#feda3c"), (e.shadowOffsetX = 0), (e.shadowOffsetY = 0), (e.shadowBlur = 0), (e.shadowColor = "#feda3c");
            var a,
                o = n / 2,
                s = i / 2,
                d = 68,
                c = 2 * Math.PI,
                r = 0,
                u = 68,
                m = 0,
                l = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
            (window.requestAnimationFrame = l),
                $(".nextMission__head")
                    .on("mouseover", function () {
                        !(function t(l) {
                            e.clearRect(0, 0, n, i),
                                e.beginPath(),
                                e.arc(o, s, d, r, l, !1),
                                e.stroke(),
                                (m += 3),
                                (a = requestAnimationFrame(function () {
                                    t((c * m) / 100 + r);
                                })),
                                m >= u + 1 && cancelAnimationFrame(a);
                        })(),
                            $(".nextMission__arrow,.nextMission__mask,.nextMission__head").addClass("-hover");
                    })
                    .on("mouseleave", function () {
                        setTimeout(function () {
                            e.clearRect(0, 0, n, i), (m = 0), $(".nextMission__arrow,.nextMission__mask,.nextMission__head").removeClass("-hover");
                        }, 100);
                    });
        })();
}
function retry(t) {
    soundFx(wrong), $("body").find(".stage__content.-active .incorrect").addClass("-active"), $("body").find(".stage .stage__countNum").text(t);
}
function nextMission(t) {
    var n = $("body", window.parent.document);
    n.find(".loading__tit span").text("NEXT STAGE LOADING..."),
        n.find(".loading").removeClass("-slideUp"),
        setTimeout(function () {
            $("body", window.parent.document).find("#iframe").attr("src", t);
        }, 1e3);
}
function loadingComplete() {
    $(window).load(function () {
        var t = $("body", window.parent.document);
        t.find(".loading__tit span").text("COMPLETE"),
            setTimeout(function () {
                t.find(".loading").addClass("-slideUp"), soundBg(bgm02);
            }, 500);
    });
}
function imgNum(t, n, i, e, a) {
    var o = t.find(".-front"),
        s = t.find(".-rear");
    return (
        void 0 === a && (a = 1),
        e
            ? ((i += a),
              setTimeout(function () {
                  s.attr("data-img-num", i + "m");
              }, 100),
              setTimeout(function () {
                  s.attr("data-img-num", i);
              }, 200),
              i > 9 &&
                  ((i -= 10),
                  setTimeout(function () {
                      o.attr("data-img-num", n + "m");
                  }, 100),
                  setTimeout(function () {
                      o.attr("data-img-num", n);
                  }, 200),
                  ++n),
              [n, i])
            : (--i,
              setTimeout(function () {
                  s.attr("data-img-num", i + "m");
              }, 100),
              setTimeout(function () {
                  s.attr("data-img-num", i);
              }, 200),
              i < 0 &&
                  ((i = 9),
                  setTimeout(function () {
                      o.attr("data-img-num", n + "m");
                  }, 100),
                  setTimeout(function () {
                      o.attr("data-img-num", n);
                  }, 200),
                  --n),
              [n, i])
    );
}
function num(t, n) {
    var i = n.toString(),
        e = t.find(".-front"),
        a = t.find(".-rear"),
        o = i[1],
        s = i[0];
    i.length > 1
        ? ((s = i[1]),
          (o = i[0]),
          setTimeout(function () {
              e.attr("data-img-num", o + "m");
          }, 100),
          setTimeout(function () {
              e.attr("data-img-num", o);
          }, 200))
        : e.attr("data-img-num", 0),
        setTimeout(function () {
            a.attr("data-img-num", s + "m");
        }, 100),
        setTimeout(function () {
            a.attr("data-img-num", s);
        }, 200);
}
$(document).ready(function () {
    $(".tipBox__close").on("click", function () {
        $(".tipBox,.tipBox__tec").removeClass("-active");
    }),
        $(".incorrect").on("click", function () {
            $(this).closest(".incorrect").removeClass("-active");
        }),
        $(".btnMain,.stage__exit").on("click", function () {
            return nextMission($(this).attr("href")), !1;
        }),
        $(".btnNext").on("click", function () {
            return nextMission($(this).attr("href")), !1;
        });
    $(".tipBtn")
        .on("click", function () {
            $("body").find(".stage__content.-active .tipBox").addClass("-active"),
                setTimeout(function () {
                    $(".tipBox__tec").addClass("-active"), soundFx(sound_sharara);
                }, 500);
        })
        .on("mouseover", function () {}),
        $(".stage__exit").on("click", function () {}),
        $(".stage__exit").on("mouseover", function () {
            soundFx(sound_click);
        }),
        $(document).keyup(function (t) {
            27 == t.which && (bgm02.pause(), (bgm02.currentTime = 0));
        }),
        $(".btnGroup .btn,button").on("click", function () {
            soundFx(click_01);
        });
});
var rageSlider = function () {
    var t = $(".rangeSlider"),
        n = $(".rangeSlider__range"),
        i = 1;
    t.each(function () {
        var t = $(this).find(n).attr("value"),
            e = $(this).find(n).attr("max");
        $(this).find(".rangeSlider__inp").text(t),
            (i = e > 50 ? 1 : 2),
            $(this)
                .find(".rangeSlider__bar")
                .css("width", t * i + "%");
    }),
        n.on("input", function () {
            var t = $(this).val(),
                n = $(this).attr("max");
            soundFx(sound_click),
                $(this).closest(".rangeSlider").find(".rangeSlider__inp").text(this.value),
                (i = n > 50 ? 1 : 2),
                $(this)
                    .closest(".rangeSlider")
                    .find(".rangeSlider__bar")
                    .css("width", t * i + "%");
        }),
        $("html").hasClass("ie11") &&
            n.change(function () {
                var t = $(this).val(),
                    n = $(this).attr("max");
                soundFx(sound_click),
                    $(this).closest(".rangeSlider").find(".rangeSlider__inp").text(this.value),
                    (i = n > 50 ? 1 : 2),
                    $(this)
                        .closest(".rangeSlider")
                        .find(".rangeSlider__bar")
                        .css("width", t * i + "%");
            });
};
function starting(t, n) {
    setTimeout(function () {
        $(".loading").addClass("-slideUp");
    }, 1500),
        setTimeout(function () {
            $(".intro__txtBox").t(t, { caret: !1, speed: n }), $(".intro__tec").addClass("-active");
        }, 2e3),
        setTimeout(function () {
            $(".intro").addClass("-active");
        }, 6500),
        $(".intro").addClass("-startUp");
}
function loadingCal(t, n, i, e) {
    var a,
        o,
        s = 31,
        d = t;
    (n = parseInt(n)), (i = parseInt(i));
    function c(t, n, i) {
        for (var e = 1; e <= 5; e++)
            !(function (e) {
                setTimeout(function () {
                    $(".loadingCal__cover").addClass("-step0" + e),
                        3 == e && ($(".loadingCal__month").text(i + " 월"), $(".loadingCal__day").text(n)),
                        5 == e && $(".loadingCal__cover").removeClass("-step01 -step02 -step03 -step04 -step05");
                }, 500 + e * t);
            })(e);
    }
    $("body").append(
        '<aside class="loadingCal" style="">\n    <div class="loadingCal__box">\n       <h1 class="loadingCal__month">1 월</h1>\n       <p class="loadingCal__day">12</p>\n       <div class="loadingCal__cover"></div>\n    </div>\n</aside>'
    ),
        $(".loadingCal__month").text(t + " 월"),
        setTimeout(function () {
            $(".loadingCal").addClass("-active");
        }, 500),
        9 == d && (s = 30),
        (a = n > i ? s - n + i : i - n),
        $(".loadingCal__day").text(n);
    for (var r = 1; r <= a; r++)
        !(function (i) {
            setTimeout(function () {
                (o = n + i) > s && ((o = Math.abs(s - o)), (d = parseInt(t) + 1) > 12 && (d = 1)),
                    c(e, o, d),
                    i == a &&
                        setTimeout(function () {
                            $(".loadingCal").removeClass("-active");
                        }, 1500);
            }, 200 + i * (5 * e));
        })(r);
}
function soundBg(t) {
    $("#chkBgm", parent.document).is(":checked") ? t.play() : (t.pause(), (t.currentTime = 0));
}
function soundFx(t, n, i) {
    var e = $("#chkFx", parent.document);
    "loop" == n && (t.loop = !0), "stop" == n ? (t.pause(), (t.currentTime = 0)) : e.is(":checked") ? t.play() : (t.pause(), (t.currentTime = 0));
}
